<!-- BUSCADOR GLOBAL -->
<div class="cli-card fit-card">
  <div class="cli-card-body">
    <div class="cli-title-center c-male">Filtros de búsqueda</div>
    <div>
      <app-search-bandeja></app-search-bandeja>
      <br />

      <!-- BOTON CREAR REGISTRO -->
      <div style="display: flex">
        <h3 class="card-subtitlte">
          Total de registros ({{ totalRegistros }})
        </h3>

        <div class="flex-1"></div>

        <div>
          <button
            class="cli-btn btn-magenta mb-2"
            type="button"
            (click)="crearRegistro()"
            >
            <mat-icon class="icon-18">add</mat-icon>Crear permisos
          </button>
        </div>
      </div>

      <!-- TABLA DE REGISTROS -->
      <div style="overflow: auto; min-height: 300px;">
        <table class="cli-table stripedtable underlinedtable">
          <thead>
            <tr class="bgc-blue c-white">
              <th>ID</th>
              <th>Nombre</th>
              <th>Código</th>
              <th>VP</th>
              <th>Gerencia Solicitante</th>
              <th>PO del Proyecto</th>
              <th>Responsable del pedido</th>
              <th>Gerencia beneficiaria</th>
              <th>Planner</th>
              <th>Controller Gerencia</th>
              <th>Controller Aprobación</th>
              <th>Tecnología</th>
              <th>Licencias</th>
              <th>Naturaleza</th>
              <th>Acción</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let registro of registros; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ registro.nombre }}</td>
              <td>{{ registro.codigo }}</td>
              <td>{{ registro.vp }}</td>
              <td>{{ registro.gerenc_sol }}</td>
              <td>{{ registro.po }}</td>
              <td>{{ registro.responsable }}</td>
              <td>{{ registro.gerenc_ben }}</td>
              <td>{{ registro.planner }}</td>
              <td>{{ registro.control_gerenc }}</td>
              <td>{{ registro.control_aprob }}</td>
              <td>{{ registro.tecnologia }}</td>
              <td>{{ registro.licencias }}</td>
              <td>{{ registro.naturaleza }}</td>
              <td>
                <div class="cli-table-actions">
                  <button
                    matTooltip="Editar"
                    class="icon-btn btn-trans c-green"
                    (click)="editarRegistro(registro)"
                  >
                    <mat-icon class="icon-18">edit</mat-icon>
                  </button>
                  <button
                    matTooltip="Eliminar"
                    class="icon-btn btn-trans c-orange"
                    (click)="borrarRegistro(registro)"
                  >
                    <mat-icon class="icon-18">delete_forever</mat-icon>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>

        <div *ngIf="loadingInbox" class="cli-loader"><mat-spinner style="margin-left: 20px" diameter="20"></mat-spinner>Cargando...</div>
        <div *ngIf="!loadingInbox && registros.length == 0" class="cli-loader">Su bandeja está vacía</div>
      </div>

      <!-- PAGINACIÓN -->
      <div *ngIf="!loadingItem && registros.length != 0"
           class="cli-pagination-container">
        <div class="cli-pagination-page">Página:</div>
        <button
              [disabled]="table_settings.page == 1"
              (click)="doPageChange(-1)"
              class="icon-btn btn-blue"
             ><mat-icon class="icon-20">chevron_left</mat-icon>
        </button>
        <div class="cli-pagination-page">
          {{ table_settings.page }}
        </div>
        <button
              [disabled]="table_settings.page == table_settings.pages"
              (click)="doPageChange(1)"
              class="icon-btn btn-blue"
              style="margin-right: 10px"
        ><mat-icon class="icon-20">chevron_right</mat-icon>
        </button>
        de
        <div style="margin-left: 10px">{{ table_settings.pages }}</div>
      </div>
    </div>
  </div>
</div>


